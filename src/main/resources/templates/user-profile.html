<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org" lang="ru">-->
<!--<head>-->
<!--  <title>Профиль пользователя - Lucky Social Network</title>-->
<!--  <meta charset="UTF-8">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: 'Roboto', sans-serif;-->
<!--      background-color: #f0f2f5;-->
<!--      color: #1c1e21;-->
<!--    }-->
<!--    header {-->
<!--      background-color: #ffffff;-->
<!--      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);-->
<!--      position: fixed;-->
<!--      width: 100%;-->
<!--      top: 0;-->
<!--      z-index: 1000;-->
<!--    }-->
<!--    .navbar {-->
<!--      padding: 0.5rem 1rem;-->
<!--    }-->
<!--    .navbar-brand {-->
<!--      color: #1877f2;-->
<!--      font-weight: bold;-->
<!--      font-size: 1.5rem;-->
<!--    }-->
<!--    .nav-link {-->
<!--      color: #65676b;-->
<!--    }-->
<!--    .nav-link:hover {-->
<!--      color: #1877f2;-->
<!--    }-->
<!--    .main-container {-->
<!--      margin-top: 70px;-->
<!--      padding: 20px;-->
<!--    }-->
<!--    .profile-container {-->
<!--      display: flex;-->
<!--      max-width: 1200px;-->
<!--      margin: 0 auto;-->
<!--    }-->
<!--    aside {-->
<!--      width: 350px;-->
<!--      margin-right: 20px;-->
<!--    }-->
<!--    .profile-main {-->
<!--      flex-grow: 1;-->
<!--    }-->
<!--    .profile-card {-->
<!--      background-color: #ffffff;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);-->
<!--      padding: 20px;-->
<!--      margin-bottom: 20px;-->
<!--    }-->
<!--    .profile-header {-->
<!--      display: flex;-->
<!--      align-items: center;-->
<!--      margin-bottom: 20px;-->
<!--    }-->
<!--    .profile-avatar {-->
<!--      width: 150px;-->
<!--      height: 150px;-->
<!--      border-radius: 50%;-->
<!--      object-fit: cover;-->
<!--      margin-right: 20px;-->
<!--    }-->
<!--    .profile-info h1 {-->
<!--      color: #1877f2;-->
<!--      margin-bottom: 10px;-->
<!--    }-->
<!--    .profile-details h2 {-->
<!--      color: #1877f2;-->
<!--      font-size: 1.2rem;-->
<!--      margin-bottom: 10px;-->
<!--    }-->
<!--    .profile-details p {-->
<!--      margin-bottom: 5px;-->
<!--    }-->
<!--    .action-buttons {-->
<!--      margin-top: 20px;-->
<!--    }-->
<!--    .btn-primary {-->
<!--      background-color: #1877f2;-->
<!--      border-color: #1877f2;-->
<!--    }-->
<!--    .btn-primary:hover {-->
<!--      background-color: #166fe5;-->
<!--      border-color: #166fe5;-->
<!--    }-->
<!--    .btn-secondary {-->
<!--      background-color: #42b72a;-->
<!--      border-color: #42b72a;-->
<!--    }-->
<!--    .btn-secondary:hover {-->
<!--      background-color: #36a420;-->
<!--      border-color: #36a420;-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--<header>-->
<!--  <nav class="navbar navbar-expand-lg navbar-light">-->
<!--    <div class="container">-->
<!--      <a class="navbar-brand" href="/">Lucky Social Network</a>-->
<!--      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">-->
<!--        <span class="navbar-toggler-icon"></span>-->
<!--      </button>-->
<!--      <div class="collapse navbar-collapse" id="navbarNav">-->
<!--        <ul class="navbar-nav ms-auto">-->
<!--          <li class="nav-item">-->
<!--            <a class="nav-link" href="/">Моя страница</a>-->
<!--          </li>-->
<!--          <li class="nav-item">-->
<!--            <a class="nav-link" href="/users/friends">Друзья</a>-->
<!--          </li>-->
<!--          <li class="nav-item">-->
<!--            <a class="nav-link" href="/chat/list">Сообщения</a>-->
<!--          </li>-->
<!--          <li class="nav-item">-->
<!--            <a class="nav-link" href="/settings">Настройки</a>-->
<!--          </li>-->
<!--        </ul>-->
<!--      </div>-->
<!--    </div>-->
<!--  </nav>-->
<!--</header>-->

<!--<div class="main-container">-->
<!--  <div class="profile-container">-->
<!--    <aside>-->
<!--      <div class="profile-card">-->
<!--        <div class="profile-header">-->
<!--          <img th:if="${user.avatar != null}" th:src="@{'data:image/jpeg;base64,' + ${T(org.apache.tomcat.util.codec.binary.Base64).encodeBase64String(user.avatar)}}" alt="User Avatar" class="profile-avatar">-->
<!--          <img th:if="${user.avatar == null}" src="/path/to/default/avatar.jpg" alt="Default Avatar" class="profile-avatar">-->
<!--          <div class="profile-info">-->
<!--            <h1 th:text="${user.username}">Username</h1>-->
<!--            <p th:text="${user.location}">Location</p>-->
<!--          </div>-->
<!--        </div>-->

<!--        <div class="action-buttons">-->
<!--          &lt;!&ndash; Кнопка "Добавить в друзья" видна только если пользователи не друзья и это не профиль текущего пользователя &ndash;&gt;-->
<!--          <form th:if="${!user.friends.contains(currentUser) && user.id != currentUser.id}"-->
<!--                th:action="@{/users/addFriend}" method="post">-->
<!--            <input type="hidden" name="userId" th:value="${currentUser.id}">-->
<!--            <input type="hidden" name="friendId" th:value="${user.id}">-->
<!--            <button type="submit" class="btn btn-primary btn-block mb-2">Добавить в друзья</button>-->
<!--          </form>-->

<!--          &lt;!&ndash; Кнопка "Написать сообщение" видна только если это не профиль текущего пользователя &ndash;&gt;-->
<!--          <a th:if="${user.id != currentUser.id}"-->
<!--             th:href="@{/chat/{senderId}/{recipientId}(senderId=${currentUser.id},recipientId=${user.id})}"-->
<!--             class="btn btn-secondary btn-block">Написать сообщение</a>-->
<!--        </div>-->
<!--        <div class="profile-details">-->
<!--          <h2>Информация о пользователе</h2>-->
<!--          <p><strong>Email:</strong> <span th:text="${user.email}">email@example.com</span></p>-->
<!--          <p><strong>Телефон:</strong> <span th:text="${user.phone}">+1234567890</span></p>-->
<!--          <p><strong>Дата рождения:</strong> <span th:text="${#temporals.format(user.dateOfBirth, 'dd.MM.yyyy')}">01.01.1990</span></p>-->
<!--          <p><strong>Пол:</strong> <span th:text="${user.gender == T(com.example.lucky_social_network.model.User.Gender).MALE ? 'Мужской' : 'Женский'}">Мужской</span></p>-->
<!--          <p><strong>Дата регистрации:</strong> <span th:text="${#temporals.format(user.createdAt, 'dd.MM.yyyy')}">01.01.2023</span></p>-->
<!--          <p><strong>Друзей:</strong> <span th:text="${user.friendsCount}">0</span></p>-->
<!--          <p><strong>Подписчиков:</strong> <span th:text="${user.followersCount}">0</span></p>-->
<!--        </div>-->
<!--        <div class="profile-bio">-->
<!--          <h2>О себе</h2>-->
<!--          <p th:text="${user.bio}">Биография пользователя</p>-->
<!--        </div>-->
<!--      </div>-->
<!--    </aside>-->
<!--    <main class="profile-main">-->
<!--      &lt;!&ndash; Здесь будет размещаться контент с постами пользователя &ndash;&gt;-->
<!--      <div class="profile-card">-->
<!--        <h2>Посты пользователя</h2>-->
<!--        <p>Здесь будут отображаться посты пользователя.</p>-->
<!--      </div>-->
<!--    </main>-->
<!--  </div>-->
<!--</div>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <title>Профиль пользователя - Lucky Social Network</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f0f2f5;
            color: #1c1e21;
        }
        header {
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        .navbar {
            padding: 0.5rem 1rem;
        }
        .navbar-brand {
            color: #1877f2;
            font-weight: bold;
            font-size: 1.5rem;
        }
        .nav-link {
            color: #65676b;
        }
        .nav-link:hover {
            color: #1877f2;
        }
        .main-container {
            margin-top: 70px;
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        .left-sidebar {
            width: 200px;
            margin-right: 40px; /* Добавлен отступ справа */
        }
        .menu-item {
            display: block;
            padding: 8px 0;
            color: #65676b;
            text-decoration: none;
        }
        .menu-item:hover {
            color: #1877f2;
        }
        .profile-container {
            flex-grow: 1;
            max-width: 800px;
        }
        .profile-header {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
        }
        .profile-avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 20px;
        }
        .profile-info {
            flex-grow: 1;
        }
        .profile-name {
            font-size: 24px;
            font-weight: bold;
            color: #1877f2;
            margin-bottom: 5px;
        }
        .profile-status {
            color: #65676b;
            margin-bottom: 10px;
        }
        .profile-details {
            margin-bottom: 15px;
        }
        .profile-actions {
            display: flex;
            gap: 10px;
        }
        .profile-stats {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 20px;
            display: flex;
            justify-content: flex-start;
            gap: 20px;
        }
        .stat-item {
            text-align: center;
        }
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #1877f2;
        }
        .stat-label {
            color: #65676b;
        }
        .btn-primary {
            background-color: #1877f2;
            border-color: #1877f2;
        }
        .btn-primary:hover {
            background-color: #166fe5;
            border-color: #166fe5;
        }
        .btn-secondary {
            background-color: #42b72a;
            border-color: #42b72a;
        }
        .btn-secondary:hover {
            background-color: #36a420;
            border-color: #36a420;
        }
        .posts-container {
            margin-top: 20px;
        }
        .post-form {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .post-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccd0d5;
            border-radius: 4px;
            resize: none;
        }
        .post-submit {
            margin-top: 10px;
        }
        .posts-list {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        .post-item {
            border-bottom: 1px solid #e4e6eb;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        .post-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .post-author {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .post-date {
            color: #65676b;
            font-size: 12px;
            margin-bottom: 10px;
        }
        .post-content {
            margin-bottom: 10px;
        }
        .post-actions {
            display: flex;
            gap: 10px;
        }
    </style>
</head>
<body>
<header>
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand" href="/">Lucky Social Network</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">На главную</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/users/friends">Друзья</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/chat/list">Сообщения</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/settings">Настройки</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<div class="main-container">
    <aside class="left-sidebar">
        <a href="/home" class="menu-item">Моя Страница</a>
        <a href="#" class="menu-item">Новости</a>
        <a href="/chat/list" class="menu-item">Сообщения</a>
        <a href="/users/friends" class="menu-item">Друзья</a>
        <a href="#" class="menu-item">Группы</a>
    </aside>

    <div class="profile-container">
        <div class="profile-header">
            <img th:if="${user.avatar != null}"
                 th:src="@{'data:image/jpeg;base64,' + ${T(org.apache.tomcat.util.codec.binary.Base64).encodeBase64String(user.avatar)}}"
                 alt="User Avatar" class="profile-avatar">
            <img th:if="${user.avatar == null}" src="/path/to/default/avatar.jpg" alt="Default Avatar"
                 class="profile-avatar">
            <div class="profile-info">
                <div class="profile-name" th:text="${user.username}">Сергей Ситников</div>
                <div class="profile-status">Online</div>

<!--                <p th:if="${user.lastLogin != null}">-->
<!--                    Последний вход: <span th:text="${#temporals.format(user.lastLogin, 'dd.MM.yyyy HH:mm')}"></span>-->
<!--                </p>-->
                <div class="profile-details">
                    <div>День рождения: <span th:text="${#temporals.format(user.dateOfBirth, 'dd MMMM yyyy')}"></span></div>
                    <div>Город: <span th:text="${user.location}"></span></div>
                    <div>
                        Семейное положение:
                        <span th:if="${user.relationshipStatus != null and !user.relationshipStatus.isEmpty()}"
                              th:text="${user.relationshipStatus.get(0)}"></span>
                        <span th:if="${user.relationshipStatus == null or user.relationshipStatus.isEmpty()}">Не указано</span>
                        <span th:if="${user.partner != null}" th:text="' - ' + ${user.partner.username}"></span>
                    </div>
                </div>
                <div class="profile-actions">
                    <form th:if="${!user.friends.contains(currentUser) && user.id != currentUser.id}"
                          th:action="@{/users/addFriend}" method="post">
                        <input type="hidden" name="userId" th:value="${currentUser.id}">
                        <input type="hidden" name="friendId" th:value="${user.id}">
                        <button type="submit" class="btn btn-primary btn-block mb-2">Добавить в друзья</button>
                    </form>
                    <a th:if="${user.id != currentUser.id}" th:href="@{/chat/view/{userId}(userId=${user.id})}"
                       class="btn btn-secondary btn-block">Отправить сообщение</a>
                </div>
            </div>
        </div>

        <div class="profile-stats">
            <div class="stat-item">
                <div class="stat-value" th:text="${user.friendsCount}">0</div>
                <div class="stat-label">Друзья</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" th:text="${user.followersCount}">0</div>
                <div class="stat-label">Подписчики</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" th:text="${user.friendsCount + user.followersCount}">0</div>
                <div class="stat-label">Контакты</div>
            </div>
        </div>

        <!-- Форма создания поста (только для владельца профиля) -->
        <!-- Форма создания поста (только для владельца профиля) -->
        <div class="posts-container" th:if="${currentUser != null && currentUser.id == user.id}">
            <div class="post-form">
                <form th:action="@{/posts/create}" method="post" th:object="${postCreationDto}">
                    <input type="hidden" name="userId" th:value="${currentUser.id}" />
                    <textarea th:field="*{content}" class="post-input" placeholder="Что у вас нового?"></textarea>
                    <div class="post-submit">
                        <button type="submit" class="btn btn-primary">Опубликовать</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Отображение постов пользователя -->
        <div th:fragment="userPosts">
            <h2>Посты пользователя</h2>
            <div th:if="${userPosts != null and not #lists.isEmpty(userPosts)}">
                <div th:each="post : ${userPosts}" class="post">
                    <div class="post-content" th:text="${post.content}"></div>
                    <div class="post-meta">
                        <span class="post-timestamp" th:text="${#temporals.format(post.timestamp, 'dd-MM-yyyy HH:mm')}"></span>
                        <span class="post-likes" th:text="${'Лайки: ' + post.likeCount}"></span>
                    </div>
                </div>
            </div>
            <div th:if="${userPosts == null or #lists.isEmpty(userPosts)}">
                <p>У пользователя пока нет постов.</p>
            </div>
        </div>
        </div>
<!--            <div class="posts-list">-->
<!--                <div class="post-item">-->
<!--                    <div class="post-author">Сергей Ситников</div>-->
<!--                    <div class="post-date">12 октября 2024</div>-->
<!--                    <div class="post-content">Это мой первый пост в социальной сети Lucky!</div>-->
<!--                    <div class="post-actions">-->
<!--                        <a href="#" class="btn btn-sm btn-outline-primary">Лайк</a>-->
<!--                        <a href="#" class="btn btn-sm btn-outline-secondary">Комментировать</a>-->
<!--                    </div>-->
<!--                </div>-->
<!--                &lt;!&ndash; Дополнительные посты будут добавлены здесь &ndash;&gt;-->
<!--            </div>-->
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>